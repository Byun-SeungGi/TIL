## static

# static이란?
static은 정적이라는 뜻이다. 
Java에서 변수나 메서드에 static을 붙이는것은 특정 객체에 속한 것이 아닌, 클래스 그 자체에 고정된 것이다 라고 선언하는것과 같다.

이렇게 말하면 어려우니, 쉽게 예를 들어보겠다.

회사에 가면 각각의 사람들은 사원증을 목에 걸고 있다.
또한 사무실에서는 모두가 볼 수 있는 벽에 걸린 시계가 있다.

여기서 사원증은 일반변수, 벽에 걸린 시계는 static 변수라고 볼 수 있다.

일반변수(사원증) - 개개인마다 가지고 있음
Static변수(벽에걸린시계) - 모든 직원이 같은 시계를 봄

# static의 주요 특징

1. static은 메모리에 딱 한번만 생성된다.
일반적으로 객체를 만들려면 new 키워드를 사용한다.
new 키워드를 사용하여 객체를 만들때마다 메모리(Heap)에 새로운 공간이 생긴다.

하지만 static은 프로그램이 시작될 때(클래스가 로딩될 때) 메모리에 딱 한번만 올라가고 프로그램이 종료될 때 까지 사라지지 않는다.

2. 모든 객체가 공유하게 된다.
static 변수는 같은 클래스로 만들어진 모든 객체가 같은 메모리 주소를 바라보게 된다.
아래 예시코드를 보겠다.

public class Main {
    public static void main(String[] args) {
        Counter c1 = new Counter();
        System.out.println("c1의 카운트 : " + c1.count);
        System.out.println("c1의 넘버 : " + c1.num);
        Counter c2 = new Counter();
        System.out.println("c2의 카운트 : " + c2.count);
        System.out.println("c2의 넘버 : " + c2.num);
    }
}

class Counter {
    static int count = 0;
    int num = 0;

    public Counter() {
        count++;
        num++;
    }
}

위와 같이 코드가 생겼을 때 결과는 어떻게 나올까?

c1의 카운트 : 1
c1의 넘버 : 1
c2의 카운트 : 2
c2의 넘버 : 1

이런식으로 나오게 된다.

count만 증가한걸 볼 수가 있는데 그게 바로 static 변수이기 때문이다.
static 변수의 경우 위에서 모든 객체가 같은 메모리 주소를 바라본다고 했기 때문에 다른 객체에서 값을 호출하더라도 공유하기 때문에 값이 증가된걸 알 수 있다.

3. 객체 생성 없이 바로 사용가능
우리는 객체를 생성할 경우 new 키워드를 사용하여 생성했었다.
Math.max()를 new Math 하지 않아도 사용할 수 있는 것이 바로 이런 이유 때문이다.

# 메모리 구조와 위치 ( static vs new )

- Method Area(Static 영역)
  이곳에 바로 static 변수와 메서드가 저장된다.
  프로그램이 종료될 때 까지 메모리를 차지하게 된다.

- Heap Area
  new로 생성된 객체가 저장된다.
  사용하지 않는다면 GC가 와서 정리하게 된다.

- Stack Area
  메서드 안에서 쓰이는 지역 변수가 저장되며, 메서드가 끝나면 바로 사라진다.

static을 남발하게 되면 결국 메모리가 해제되지 않고 계속 쌓여 시스템이 느려지는 메모리 누수의 원인이 될 수 있다.

4. static 변수의 단점

# 동시성 이슈
Spring은 기본적으로 멀티 스레드 환경이다.
static 변수에 값을 저장하고 수정하게 만들면, 여러 사용자가 동시에 접속하여 A 사용자의 데이터가 B 사용자에게 보이는 오류가 발생 할 수 있다.
그렇기 때문에 static 변수는 final로 사용하는게 좋은 것 같다.
  
